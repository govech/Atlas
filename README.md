# Atlas Android Framework

ä¸€ä¸ªç”Ÿäº§çº§Androidé€šç”¨å¼€å‘æ¡†æ¶ï¼Œé‡‡ç”¨MVVM + Clean Architectureæ¶æ„æ¨¡å¼ï¼Œæ”¯æŒå¿«é€Ÿå¼€å‘ä¼ä¸šçº§åº”ç”¨ã€‚

## é¡¹ç›®ç®€ä»‹

Atlasæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„Androidå¼€å‘æ¡†æ¶ï¼Œæä¾›å®Œæ•´çš„åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ç½‘ç»œå±‚ã€æ•°æ®åº“å±‚ã€UIç»„ä»¶åº“ç­‰æ ¸å¿ƒæ¨¡å—ã€‚æ¡†æ¶éµå¾ªæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿå¿«é€Ÿå¯åŠ¨æ–°é¡¹ç›®ï¼Œä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„** - æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œï¼Œä½è€¦åˆé«˜å†…èš
- ğŸš€ **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„ç¼–è¯‘é€Ÿåº¦å’Œè¿è¡Œæ€§èƒ½
- ğŸ”’ **ç±»å‹å®‰å…¨** - 100% Kotlinï¼Œå……åˆ†åˆ©ç”¨ç©ºå®‰å…¨ç‰¹æ€§
- ğŸ¨ **ç°ä»£UI** - Material Designè§„èŒƒï¼Œä¸°å¯Œçš„UIç»„ä»¶
- ğŸ”„ **å“åº”å¼ç¼–ç¨‹** - Kotlin Flow + Coroutines
- ğŸ’‰ **ä¾èµ–æ³¨å…¥** - Hiltæä¾›ç¼–è¯‘æ—¶æ£€æŸ¥
- ğŸ“¦ **ç»Ÿä¸€ç®¡ç†** - Version Catalogç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬
- ğŸ›¡ï¸ **å®Œå–„çš„é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ˜ å°„

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Kotlin | 2.0.21 | ä¸»è¦å¼€å‘è¯­è¨€ |
| Android Gradle Plugin | 8.10.1 | æ„å»ºå·¥å…· |
| Gradle | 8.10.2 | é¡¹ç›®æ„å»ºç³»ç»Ÿ |
| Min SDK | 24 | æœ€ä½æ”¯æŒAndroid 7.0 |
| Target SDK | 36 | ç›®æ ‡Androidç‰ˆæœ¬ |

### æ¶æ„ç»„ä»¶

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Hilt | 2.51 | ä¾èµ–æ³¨å…¥æ¡†æ¶ |
| Lifecycle | 2.8.7 | ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| ViewModel | 2.8.7 | MVVMæ¶æ„æ ¸å¿ƒ |
| Coroutines | 1.9.0 | åç¨‹æ”¯æŒ |
| Flow | 1.9.0 | å“åº”å¼æ•°æ®æµ |

### ç½‘ç»œå±‚

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Retrofit | 2.11.0 | REST APIå®¢æˆ·ç«¯ |
| OkHttp | 4.12.0 | HTTPå®¢æˆ·ç«¯ |
| Gson | 2.11.0 | JSONåºåˆ—åŒ– |

### æ•°æ®åº“å±‚

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Room | 2.6.1 | æœ¬åœ°æ•°æ®åº“ |
| KSP | 2.0.21-1.0.28 | æ³¨è§£å¤„ç†å™¨ |

### UIç»„ä»¶

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| ViewBinding | - | è§†å›¾ç»‘å®š |
| Material | 1.13.0 | Material Design |
| ConstraintLayout | 2.2.1 | çº¦æŸå¸ƒå±€ |

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Android Studio Ladybug | 2024.2.1 æˆ–æ›´é«˜ç‰ˆæœ¬
- JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- Android SDK API 24-36
- Gradle 8.10.2

### å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/govech/Atlas.git
cd Atlas
```

### æ„å»ºé¡¹ç›®

```bash
# æ¸…ç†é¡¹ç›®
./gradlew clean

# æ„å»ºDebugç‰ˆæœ¬
./gradlew app:assembleDebug

# æ„å»ºReleaseç‰ˆæœ¬
./gradlew app:assembleRelease
```

### è¿è¡Œåº”ç”¨

1. åœ¨Android Studioä¸­æ‰“å¼€é¡¹ç›®
2. ç­‰å¾…GradleåŒæ­¥å®Œæˆï¼ˆçº¦40ç§’ï¼‰
3. è¿æ¥Androidè®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
4. ç‚¹å‡»è¿è¡ŒæŒ‰é’®æˆ–æ‰§è¡Œï¼š

```bash
./gradlew app:installDebug
```

## æ¨¡å—ç»“æ„

```
Atlas/
â”œâ”€â”€ app/                          # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/                 # åº”ç”¨ä»£ç 
â”‚   â”‚   â”‚   â””â”€â”€ com/sword/atlas/
â”‚   â”‚   â”‚       â”œâ”€â”€ App.kt        # Applicationç±»
â”‚   â”‚   â”‚       â””â”€â”€ MainActivity.kt
â”‚   â”‚   â””â”€â”€ res/                  # åº”ç”¨èµ„æº
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ feature-template/             # åŠŸèƒ½æ¨¡æ¿æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/sword/atlas/feature/template/
â”‚   â”‚   â”‚       â”œâ”€â”€ data/         # æ•°æ®å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ api/      # APIæ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ model/    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ repository/ # ä»“åº“
â”‚   â”‚   â”‚       â”œâ”€â”€ di/           # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚       â””â”€â”€ ui/           # UIå±‚
â”‚   â”‚   â”‚           â”œâ”€â”€ login/    # ç™»å½•åŠŸèƒ½
â”‚   â”‚   â”‚           â”œâ”€â”€ userlist/ # ç”¨æˆ·åˆ—è¡¨
â”‚   â”‚   â”‚           â””â”€â”€ userdetail/ # ç”¨æˆ·è¯¦æƒ…
â”‚   â”‚   â””â”€â”€ res/
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-ui/                      # UIç»„ä»¶æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/sword/atlas/core/ui/
â”‚   â”‚   â”‚       â”œâ”€â”€ base/         # åŸºç±»
â”‚   â”‚   â”‚       â”œâ”€â”€ adapter/      # é€‚é…å™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ dialog/       # å¯¹è¯æ¡†
â”‚   â”‚   â”‚       â”œâ”€â”€ widget/       # è‡ªå®šä¹‰æ§ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ ext/          # æ‰©å±•å‡½æ•°
â”‚   â”‚   â””â”€â”€ res/
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-common/                  # åŸºç¡€æ¶æ„æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/sword/atlas/core/
â”‚   â”‚           â”œâ”€â”€ common/
â”‚   â”‚           â”‚   â”œâ”€â”€ base/         # åŸºç¡€ç±»
â”‚   â”‚           â”‚   â”œâ”€â”€ constant/     # å¸¸é‡å®šä¹‰
â”‚   â”‚           â”‚   â”œâ”€â”€ dispatcher/   # åç¨‹è°ƒåº¦å™¨
â”‚   â”‚           â”‚   â”œâ”€â”€ exception/    # å¼‚å¸¸å¤„ç†
â”‚   â”‚           â”‚   â”œâ”€â”€ ext/          # æ‰©å±•å‡½æ•°
â”‚   â”‚           â”‚   â””â”€â”€ util/         # å·¥å…·ç±»
â”‚   â”‚           â””â”€â”€ model/
â”‚   â”‚               â”œâ”€â”€ ApiResponse/  # APIå“åº”å°è£…ç±»
â”‚   â”‚               â”œâ”€â”€ ErrorCode/    # é”™è¯¯ç æšä¸¾
â”‚   â”‚               â”œâ”€â”€ PageData/     # åˆ†é¡µæ•°æ®å°è£…ç±»
â”‚   â”‚               â”œâ”€â”€ Result/       # é€šç”¨ç»“æœå°è£…ç±»
â”‚   â”‚               â””â”€â”€ UiState/      # UIçŠ¶æ€å¯†å°ç±»
â”‚   â”‚   
â”‚   â”‚          
â”‚   â”‚           
â”‚   â”‚           
â”‚   â”‚          
â”‚   â”‚           
â”‚   â”‚           
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-network/                 # ç½‘ç»œå±‚æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/sword/atlas/core/network/
â”‚   â”‚           â”œâ”€â”€ client/       # Retrofitå®¢æˆ·ç«¯
â”‚   â”‚           â”œâ”€â”€ config/       # ç½‘ç»œé…ç½®
â”‚   â”‚           â”œâ”€â”€ di/           # Hiltæ¨¡å—
â”‚   â”‚           â”œâ”€â”€ ext/          # æ‰©å±•å‡½æ•°
â”‚   â”‚           â”œâ”€â”€ interceptor/  # æ‹¦æˆªå™¨
â”‚   â”‚           â”œâ”€â”€ manager/      # ä¸‹è½½ä¸Šä¼ ç®¡ç†
â”‚   â”‚           â”œâ”€â”€ monitor/      # ç½‘ç»œç›‘æ§
â”‚   â”‚           â””â”€â”€ security/     # å®‰å…¨ç›¸å…³
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-database/                # æ•°æ®åº“å±‚æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/sword/atlas/core/database/
â”‚   â”‚           â”œâ”€â”€ dao/          # DAOæ¥å£
â”‚   â”‚           â”œâ”€â”€ entity/       # å®ä½“ç±»
â”‚   â”‚           â”œâ”€â”€ migration/    # æ•°æ®åº“è¿ç§»
â”‚   â”‚           â””â”€â”€ di/           # Hiltæ¨¡å—
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-router/                  # è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/sword/atlas/core/router/
â”‚   â”‚           â”œâ”€â”€ annotation/   # è·¯ç”±æ³¨è§£
â”‚   â”‚           â”œâ”€â”€ callback/     # å›è°ƒå¤„ç†
â”‚   â”‚           â”œâ”€â”€ exception/    # å¼‚å¸¸å¤„ç†
â”‚   â”‚           â”œâ”€â”€ interceptor/  # è·¯ç”±æ‹¦æˆªå™¨
â”‚   â”‚           â”œâ”€â”€ processor/    # æ³¨è§£å¤„ç†å™¨
â”‚   â”‚           â””â”€â”€ util/         # å·¥å…·ç±»
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ core-model/                   # æ•°æ®æ¨¡å‹æ¨¡å—
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/sword/atlas/core/model/
â”‚   â”‚           â”œâ”€â”€ ApiResponse.kt
â”‚   â”‚           â”œâ”€â”€ Result.kt
â”‚   â”‚           â”œâ”€â”€ UiState.kt
â”‚   â”‚           â”œâ”€â”€ PageData.kt
â”‚   â”‚           â””â”€â”€ ErrorCode.kt
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ gradle/
â”‚   â”œâ”€â”€ libs.versions.toml        # ä¾èµ–ç‰ˆæœ¬ç®¡ç†
â”‚   â””â”€â”€ wrapper/
â”œâ”€â”€ doc/                          # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ scripts/                      # è„šæœ¬å·¥å…·
â”œâ”€â”€ build.gradle.kts              # æ ¹æ„å»ºè„šæœ¬
â””â”€â”€ settings.gradle.kts           # é¡¹ç›®è®¾ç½®
```

## ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºViewModel

```kotlin
@HiltViewModel
class UserViewModel @Inject constructor(
    private val repository: UserRepository
) : BaseViewModel() {
    
    private val _userState = MutableStateFlow<UiState<User>>(UiState.Idle)
    val userState: StateFlow<UiState<User>> = _userState.asStateFlow()
    
    fun loadUser(userId: Long) {
        viewModelScope.launch {
            _userState.value = UiState.Loading
            
            when (val result = repository.getUser(userId)) {
                is Result.Success -> {
                    _userState.value = UiState.Success(result.data)
                }
                is Result.Error -> {
                    _userState.value = UiState.Error(result.code, result.message)
                }
            }
        }
    }
}
```

### 2. åˆ›å»ºRepository

```kotlin
class UserRepository @Inject constructor(
    private val api: UserApi,
    private val userDao: UserDao
) : BaseRepository() {
    
    suspend fun getUser(userId: Long): Result<User> {
        // å…ˆä»æ•°æ®åº“è·å–
        val localUser = userDao.getUserById(userId).first()
        if (localUser != null) {
            return Result.Success(localUser.toUser())
        }
        
        // ä»ç½‘ç»œè·å–
        return executeRequest {
            api.getUser(userId)
        }
    }
}
```

### 3. åˆ›å»ºActivity

```kotlin
@AndroidEntryPoint
class UserActivity : BaseVMActivity<ActivityUserBinding, UserViewModel>() {
    
    override val viewModel: UserViewModel by viewModels()
    
    override fun createBinding(): ActivityUserBinding {
        return ActivityUserBinding.inflate(layoutInflater)
    }
    
    override fun initView() {
        binding.btnLoad.setOnClickListener {
            viewModel.loadUser(1L)
        }
    }
    
    override fun observeData() {
        super.observeData()
        
        viewModel.userState.collectOnMain(this) { state ->
            when (state) {
                is UiState.Loading -> showLoading()
                is UiState.Success -> {
                    hideLoading()
                    binding.tvUserName.text = state.data.username
                }
                is UiState.Error -> {
                    hideLoading()
                    toast(state.message)
                }
                else -> {}
            }
        }
    }
}
```

### 4. ç½‘ç»œè¯·æ±‚

```kotlin
interface UserApi {
    @GET("user/{id}")
    suspend fun getUser(@Path("id") userId: Long): ApiResponse<User>
    
    @GET("users")
    suspend fun getUserList(
        @Query("page") page: Int,
        @Query("size") size: Int
    ): ApiResponse<PageData<User>>
}
```

### 5. æ•°æ®åº“æ“ä½œ

```kotlin
@Entity(tableName = "user")
data class UserEntity(
    @PrimaryKey val id: Long,
    @ColumnInfo(name = "username") val username: String,
    @ColumnInfo(name = "avatar") val avatar: String?
)

@Dao
interface UserDao : BaseDao<UserEntity> {
    @Query("SELECT * FROM user WHERE id = :id")
    fun getUserById(id: Long): Flow<UserEntity?>
    
    @Query("SELECT * FROM user")
    fun getAllUsers(): Flow<List<UserEntity>>
}
```

### 6. ä½¿ç”¨æ‰©å±•å‡½æ•°

```kotlin
// å­—ç¬¦ä¸²æ‰©å±•
val isEmpty = username.isNullOrBlank()
val age = ageStr.toIntOrDefault(0)

// Contextæ‰©å±•
context.toast("æ“ä½œæˆåŠŸ")
val px = context.dp2px(16f)

// Viewæ‰©å±•
view.visible()
view.gone()
button.setOnClickListener(interval = 500) {
    // é˜²æŠ–ç‚¹å‡»
}

// Flowæ‰©å±•
userFlow.collectOnMain(this) { user ->
    // åœ¨ä¸»çº¿ç¨‹æ”¶é›†
}
```

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ

- éµå¾ª[Kotlinç¼–ç è§„èŒƒ](https://kotlinlang.org/docs/coding-conventions.html)
- ä½¿ç”¨Android Studioé»˜è®¤ä»£ç æ ¼å¼åŒ–
- æ‰€æœ‰publicç±»å’Œæ–¹æ³•å¿…é¡»æœ‰KDocæ³¨é‡Š
- ç¦æ­¢ç¡¬ç¼–ç å­—ç¬¦ä¸²ã€é¢œè‰²ã€å°ºå¯¸å€¼
- å‘½åè§„èŒƒï¼š
  - ç±»åï¼šPascalCase
  - æ–¹æ³•åï¼šcamelCase
  - å¸¸é‡ï¼šUPPER_SNAKE_CASE
  - èµ„æºIDï¼šsnake_case

### æäº¤è§„èŒƒ

æäº¤ä¿¡æ¯æ ¼å¼ï¼š`<type>(<scope>): <subject>`

ç±»å‹ï¼ˆtypeï¼‰ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾ç›¸å…³

ç¤ºä¾‹ï¼š
```
feat(network): æ·»åŠ è¯·æ±‚é‡è¯•æœºåˆ¶
fix(ui): ä¿®å¤åˆ—è¡¨æ»‘åŠ¨å¡é¡¿é—®é¢˜
docs(readme): æ›´æ–°å¿«é€Ÿå¼€å§‹æŒ‡å—
```

### ä»£ç å®¡æŸ¥

æ‰€æœ‰Pull Requestå¿…é¡»ç»è¿‡ä»£ç å®¡æŸ¥æ‰èƒ½åˆå¹¶ï¼š

- ä»£ç ç¬¦åˆç¼–ç è§„èŒƒ
- é€šè¿‡æ‰€æœ‰å•å…ƒæµ‹è¯•
- Lintæ£€æŸ¥æ— Error
- åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- æœ‰é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£

## æ–‡æ¡£

- [æ¶æ„è®¾è®¡æ–‡æ¡£](doc/æ¶æ„è®¾è®¡æ–‡æ¡£.md)
- [ç¼–ç è§„èŒƒæ–‡æ¡£](doc/ç¼–ç è§„èŒƒæ–‡æ¡£.md)
- [æ¨¡å—å¼€å‘æŒ‡å—](doc/æ¨¡å—å¼€å‘æŒ‡å—.md)
- [APIä½¿ç”¨æ–‡æ¡£](doc/APIä½¿ç”¨æ–‡æ¡£.md)
- [æ··æ·†é…ç½®è¯´æ˜](doc/æ··æ·†é…ç½®è¯´æ˜.md)

## æ€§èƒ½æŒ‡æ ‡

- Gradle Syncæ—¶é—´ï¼š< 40ç§’
- Clean Buildæ—¶é—´ï¼š< 3åˆ†é’Ÿ
- åº”ç”¨å†·å¯åŠ¨ï¼š< 2ç§’
- åº”ç”¨çƒ­å¯åŠ¨ï¼š< 1ç§’
- å†…å­˜å ç”¨ï¼š< 100MB

## å…¼å®¹æ€§

- Androidç‰ˆæœ¬ï¼šAPI 24 (Android 7.0) - API 36
- å±å¹•å°ºå¯¸ï¼š4.7" - å¹³æ¿
- åˆ†è¾¨ç‡ï¼šhdpiã€xhdpiã€xxhdpiã€xxxhdpi
- å‚å•†ï¼šåŸç”ŸAndroidã€å°ç±³ã€åä¸ºã€ä¸‰æ˜Ÿç­‰

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/govech/Atlas
- é—®é¢˜åé¦ˆï¼šhttps://github.com/govech/Atlas/issues
- é‚®ç®±ï¼šæš‚æ— 

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**Happy Coding! ğŸš€**
