# Android MVVM通用框架审查实施清单

## 📋 第一阶段: 框架整体分析 (预计2-3小时)

### Task 1: 框架信息收集

- [ ] 记录框架名称、版本号、维护状态
- [ ] 统计框架代码行数和模块数量
- [ ] 整理框架目录结构树状图
- [ ] 列出所有依赖的第三方库及版本
- [ ] 检查是否有README/Wiki文档
- [ ] 确认minSdk、targetSdk、Kotlin/Java版本

### Task 2: 模块划分审查

- [ ] 检查模块划分是否清晰(base/network/db/ui等)
- [ ] 评估模块间依赖关系是否合理
- [ ] 确认是否使用多module还是单module
- [ ] 检查公共模块抽取是否充分
- [ ] 验证模块命名规范
- [ ] 评估模块粒度是否合适

### Task 3: 文档完善度检查

- [ ] 检查是否有框架使用文档
- [ ] 检查是否有API文档(KDoc/JavaDoc)
- [ ] 检查是否有示例Demo
- [ ] 检查是否有版本更新日志
- [ ] 检查是否有接入指南
- [ ] 评估文档的完整性和准确性

------

## 🏗️ 第二阶段: MVVM架构实现审查 (预计3-4小时)

### Task 4: Base基类设计审查

- [ ] BaseActivity检查
  - 生命周期管理是否完善
  - DataBinding/ViewBinding集成
  - 通用UI操作封装(loading/toast/dialog)
  - 状态栏/导航栏处理
  - 权限请求封装
  - EventBus/LiveDataBus集成
- [ ] BaseFragment检查
  - 懒加载实现方案
  - 与Activity通信机制
  - 生命周期感知
  - 可见性判断处理
- [ ] BaseViewModel检查
  - Coroutine/RxJava生命周期管理
  - 通用加载状态封装(Loading/Success/Error)
  - 异常统一处理机制
  - 页面状态管理(UIState设计)

### Task 5: 数据绑定实现审查

- [ ] 检查ViewBinding
- [ ] 验证内存泄漏防护措施
- [ ] 评估绑定代码的简洁性

### Task 6: Flow使用审查

- [ ] 检查/StateFlow/SharedFlow选型
- [ ] 审查粘性事件处理方案
- [ ] 检查SingleLiveEvent实现(一次性事件)
- [ ] 验证数据倒灌问题处理
- [ ] 检查observe生命周期感知
- [ ] 评估响应式数据流设计

### Task 7: Repository层设计审查

- [ ] 检查Repository抽象接口设计
- [ ] 审查数据源切换逻辑(本地/远程)
- [ ] 检查缓存策略实现
- [ ] 验证数据转换(DTO→Entity→UI Model)
- [ ] 评估Repository与ViewModel解耦程度

------

## 🌐 第三阶段: 网络层框架审查 (预计2-3小时)

### Task 8: 网络请求封装审查

- [ ] Retrofit封装检查
  - BaseUrl配置方式
  - 多BaseUrl支持
  - 拦截器设计(日志/Header/Token刷新)
  - 超时配置
  - 重试机制
- [ ] 请求响应处理
  - 统一数据结构封装(BaseResponse)
  - 错误码统一处理
  - 异常转换机制(网络异常/服务异常/业务异常)
  - Loading状态管理
  - 泛型设计合理性

### Task 9: 网络请求调用方式审查

- [ ] 检查Coroutine封装(如使用)
- [ ] 审查suspend函数设计
- [ ] 验证线程切换处理
- [ ] 检查请求取消机制
- [ ] 评估API调用简洁性

### Task 10: 网络层扩展性审查

- [ ] 检查是否支持文件上传/下载
- [ ] 检查是否支持进度监听
- [ ] 检查是否支持多域名配置
- [ ] 检查是否支持动态Header
- [ ] 检查是否支持Cookie管理
- [ ] 评估自定义扩展的便利性

------

## 💾 第四阶段: 数据持久化审查 (预计2小时)

### Task 11: 数据库封装审查

- [ ] 检查数据库选型(Room/SQLite/其他)
- [ ] 审查数据库基类设计
- [ ] 检查DAO层抽象
- [ ] 验证数据库升级策略
- [ ] 检查事务处理封装
- [ ] 评估数据库操作线程安全

### Task 12: 本地存储审查

- [ ] 检查SharedPreferences封装
- [ ] 审查MMKV等高性能存储集成
- [ ] 检查序列化方案(Gson/Moshi/kotlinx.serialization)
- [ ] 验证敏感数据加密存储
- [ ] 检查存储工具类设计

------

## 🔌 第五阶段: 依赖注入审查 (预计1-2小时)

### Task 13: DI框架集成审查

- [ ] 检查DI框架选型(Hilt)
- [ ] 审查Module配置合理性
- [ ] 检查作用域管理(@Singleton/@ActivityScoped等)
- [ ] 验证ViewModel注入方式
- [ ] 检查Repository/DataSource注入
- [ ] 评估依赖图清晰度

### Task 14: DI最佳实践审查

- [ ] 检查是否过度使用DI
- [ ] 审查构造函数注入vs属性注入
- [ ] 检查循环依赖风险
- [ ] 验证接口与实现解耦
- [ ] 评估DI配置复杂度

------

## 🎨 第六阶段: UI组件库审查 (预计2-3小时)

### Task 15: 通用UI组件审查

- [ ] LoadingDialog/ProgressDialog
  - 样式自定义能力
  - 防重复点击
  - 生命周期绑定
- [ ] 空状态/错误状态页面
  - StateLayout实现
  - 自定义布局支持
  - 重试机制
- [ ] Toast/Snackbar封装
  - 防重复弹出
  - 自定义样式
  - 全局配置
- [ ] TitleBar/Toolbar封装
  - 统一样式
  - 沉浸式适配
  - 自定义能力

### Task 16: RecyclerView框架审查

- [ ] 检查BaseAdapter封装
- [ ] 审查ViewHolder复用机制
- [ ] 检查多类型Item支持
- [ ] 验证DataBinding集成
- [ ] 检查分页加载封装
- [ ] 审查空数据/加载更多/加载失败UI
- [ ] 检查Item点击事件封装
- [ ] 评估DiffUtil使用

### Task 17: 自定义View审查

- [ ] 列出所有自定义View
- [ ] 检查View的复用价值
- [ ] 审查自定义属性设计
- [ ] 验证性能优化(onDraw/onMeasure)
- [ ] 检查内存泄漏防护

------

## 🛠️ 第七阶段: 工具类库审查 (预计2小时)

### Task 18: 常用工具类检查

- [ ] **日期时间工具** - 格式化/转换/计算
- [ ] **字符串工具** - 验证/加密/编解码
- [ ] **文件工具** - 读写/复制/删除
- [ ] **图片工具** - 压缩/裁剪/保存
- [ ] **屏幕工具** - dp/px转换/屏幕信息
- [ ] **键盘工具** - 显示/隐藏
- [ ] **权限工具** - 检查/申请
- [ ] **设备信息工具** - 系统版本/设备ID等
- [ ] **网络工具** - 网络状态/类型判断
- [ ] **日志工具** - 统一日志输出

### Task 19: 工具类设计质量审查

- [ ] 检查工具类是否为object/静态类
- [ ] 审查方法命名清晰度
- [ ] 检查是否有单元测试
- [ ] 验证线程安全性
- [ ] 评估工具类完整性和实用性
- [ ] 检查是否有重复工具

------

## 🚀 第八阶段: 扩展功能审查 (预计2-3小时)

### Task 20: 图片加载框架审查

- [ ] 检查图片库选型(Glide/Coil/Picasso)
- [ ] 审查全局配置封装
- [ ] 检查占位图/错误图配置
- [ ] 验证缓存策略
- [ ] 检查圆角/高斯模糊等转换封装
- [ ] 评估扩展函数设计(如Kotlin扩展)

### Task 21: 路由框架审查

- [ ] 检查路由框架集成
- [ ] 审查页面跳转封装
- [ ] 检查参数传递方案
- [ ] 验证路由拦截器
- [ ] 检查DeepLink支持

### Task 22: 日志与异常处理审查

- [ ] 检查日志框架(Timber/自定义)
- [ ] 审查日志分级管理
- [ ] 检查生产环境日志控制
- [ ] 验证全局异常捕获
- [ ] 检查Crash日志收集
- [ ] 审查异常上报机制

### Task 23: 下载/上传管理器审查

- [ ] 检查是否有下载管理封装
- [ ] 审查断点续传支持
- [ ] 检查多任务并发控制
- [ ] 验证进度回调机制
- [ ] 检查文件存储管理

------

## 🔒 第九阶段: 安全性审查 (预计1-2小时)

### Task 24: 数据安全审查

- [ ] 检查敏感数据加密存储(Token/密码)
- [ ] 审查加密算法选择(AES/RSA)
- [ ] 检查密钥管理方案
- [ ] 验证数据传输加密(HTTPS)
- [ ] 检查证书校验配置

### Task 25: 代码安全审查

- [ ] 检查ProGuard/R8混淆配置
- [ ] 审查关键代码是否混淆
- [ ] 检查是否有硬编码密钥/密码
- [ ] 验证WebView安全配置
- [ ] 检查组件导出安全性

------

## ⚡ 第十阶段: 性能优化审查 (预计2-3小时)

### Task 26: 内存优化审查

- [ ] 检查BaseActivity/Fragment生命周期清理
- [ ] 审查ViewModel onCleared处理
- [ ] 检查单例持有Context风险
- [ ] 验证图片内存管理
- [ ] 检查集合对象使用
- [ ] 审查静态变量使用

### Task 27: 启动优化审查

- [ ] 检查Application onCreate初始化
- [ ] 审查是否有启动优化方案
- [ ] 检查懒加载实现
- [ ] 验证异步初始化处理
- [ ] 评估启动速度影响

### Task 28: UI性能审查

- [ ] 检查布局复用(include/merge/ViewStub)
- [ ] 审查RecyclerView优化
- [ ] 检查过度绘制
- [ ] 验证布局层级深度
- [ ] 检查主线程耗时操作

------

## 📦 第十一阶段: 代码质量审查 (预计3-4小时)

### Task 29: 代码规范审查

- [ ] 检查命名规范(类/方法/变量)
- [ ] 审查代码格式(ktlint/detekt配置)
- [ ] 检查注释完整性(KDoc)
- [ ] 验证包结构组织
- [ ] 检查资源命名规范

### Task 30: 代码复杂度审查

- [ ] 识别超长类(>500行)
- [ ] 识别超长方法(>50行)
- [ ] 检查方法参数过多(>5个)
- [ ] 识别嵌套层级过深(>3层)
- [ ] 检查is/when分支过多

### Task 31: 重复代码审查

- [ ] 扫描重复代码块
- [ ] 识别可抽取的公共逻辑
- [ ] 检查相似方法合并可能
- [ ] 审查扩展函数复用

### Task 32: 潜在Bug检查

- [ ] 空指针异常风险(使用?. ?: !!)
- [ ] 资源泄漏(未关闭Cursor/Stream)
- [ ] 线程安全问题
- [ ] 生命周期相关Bug
- [ ] 类型转换异常

------

## 🧪 第十二阶段: 可测试性审查 (预计1-2小时)

### Task 33: 单元测试审查

- [ ] 检查是否有单元测试
- [ ] 审查测试覆盖率
- [ ] 检查ViewModel测试
- [ ] 验证Repository测试
- [ ] 检查工具类测试

### Task 34: 可测试性设计审查

- [ ] 检查依赖注入是否便于Mock
- [ ] 审查接口抽象是否利于测试
- [ ] 检查业务逻辑是否可单元测试
- [ ] 验证测试环境配置

------

## 🔧 第十三阶段: 可扩展性审查 (预计2小时)

### Task 35: 框架扩展点审查

- [ ] 检查是否提供足够的抽象接口
- [ ] 审查是否支持自定义实现替换
- [ ] 检查配置项灵活性
- [ ] 验证插件化扩展能力
- [ ] 评估二次开发友好度

### Task 36: 向后兼容性审查

- [ ] 检查API变更是否向下兼容
- [ ] 审查废弃API处理(@Deprecated)
- [ ] 检查版本更新策略
- [ ] 验证数据库升级兼容性

------

## 📱 第十四阶段: 示例Demo审查 (预计1-2小时)

### Task 37: Demo完整性审查

- [ ] 检查是否有完整的Demo项目
- [ ] 审查Demo功能覆盖度
- [ ] 检查Demo代码质量
- [ ] 验证Demo可运行性
- [ ] 评估Demo参考价值

### Task 38: 使用案例审查

- [ ] 检查常见场景示例
- [ ] 审查API调用示例
- [ ] 检查最佳实践指导
- [ ] 验证接入步骤清晰度

------

## 📊 第十五阶段: 构建与发布审查 (预计1小时)

### Task 39: 构建配置审查

- [ ] 检查Gradle配置优化
- [ ] 审查多渠道打包配置
- [ ] 检查混淆配置完善度
- [ ] 验证签名配置
- [ ] 检查依赖版本管理(buildSrc/version catalog)

### Task 40: 发布准备审查

- [ ] 检查是否有版本管理策略
- [ ] 审查Changelog维护
- [ ] 检查发布脚本
- [ ] 验证Maven/JitPack发布配置(如需)

------

## 📝 第十六阶段: 总结报告输出

### Task 41: 问题汇总

- [ ] 按严重程度分类问题(严重/重要/建议)
- [ ] 统计各模块问题数量
- [ ] 标注影响范围
- [ ] 提供修复优先级建议

### Task 42: 优化建议输出

- [ ] 架构优化建议
- [ ] 性能优化建议
- [ ] 代码质量改进建议
- [ ] 新特性建议
- [ ] 文档完善建议

### Task 43: 最佳实践总结

- [ ] 总结框架亮点
- [ ] 提炼可复用模式
- [ ] 输出改进路线图

------

## 📋 审查工具推荐

### 代码分析工具

- **Android Studio Lint** - 静态代码分析
- **detekt** - Kotlin代码质量检查
- **ktlint** - Kotlin代码格式检查
- **Android Profiler** - 性能分析
- **LeakCanary** - 内存泄漏检测

### 文档工具

- **Dokka** - Kotlin文档生成
- **PlantUML** - 架构图绘制

------

## ⏱️ 预计总耗时: 25-35小时

**建议分阶段执行,每完成一个阶段输出阶段性报告。**